## Java虚拟机

JVM/GC：垃圾回收、OOM、判断死亡方法、

### 内存模型

栈：每个线程有一个栈区（线程私有），栈中只保存基本数据类型和自定义对象的引用。对象放在堆区；

堆：存储对象。被所有线程所共享，堆中数据由垃圾回收负责（GC堆）

方法静态区：被所有线程共享，存储class和static变量；元素唯一，类如String；

多线程共享的区域？堆、方法区；

和垃圾回收相关？堆；



### 抛出OutOfMemoryError（OOM）

OOM：Out Of Memory，内存溢出；

原因：分配内存少；GC跟不上分配新对象的速度；

常见OOM：java堆内存溢出、java永久代溢出、JAVA虚拟机栈溢出；



内存泄漏：申请完没有释放，虚拟机不能再次使用；Java中也可能出现

详见：https://www.cnblogs.com/thinkvenus/p/6805495.html

### 垃圾回收

什么是GC？为什么要用GC？

垃圾指程序当中，没有任何指针指向的对象；不GC，可能导致内存溢出；

垃圾回收针对堆和方法区进行，方法区可回收可不回收；



#### 判断死亡的方法

1.添加引用计数器（不采用）。对象添加一个引用时，加1，引用失效减1，引用计数为0对象被回收。当对象出现循环引用，会导致计数器永不为0。

2.可达性分析算法。

### 

### 参考文献

尚硅谷 JVM：135什么时JC，157内存溢出分析

cyc2018

《深入理解Java虚拟机》